<script>
const API_URL = "PASTE_YOUR_APPS_SCRIPT_WEB_APP_URL"; // <-- your deployed link

async function loadEvents() {
  const res = await fetch(API_URL);
  const events = await res.json();
  render(events);
}

async function addEvent(event) {
  await fetch(API_URL, {
    method: "POST",
    contentType: "application/json",
    body: JSON.stringify(event)
  });
  loadEvents();
}

async function deleteEvent(title) {
  await fetch(`${API_URL}?title=${encodeURIComponent(title)}`, { method: "DELETE" });
  loadEvents();
}

function render(events) {
  const upcomingEl = document.getElementById("upcoming");
  const pastEl = document.getElementById("past");
  upcomingEl.innerHTML = "";
  pastEl.innerHTML = "";
  
  const today = new Date();
  events.forEach(e => {
    const d = new Date(e.Date);
    const html = `
      <article class="card">
        <h4>${e.Title}</h4>
        <div class="when">${e.Date}</div>
        <div class="where">${e.City}</div>
        <div class="actions">
          <button onclick="deleteEvent('${e.Title}')">Delete</button>
        </div>
      </article>
    `;
    if (d >= today) {
      upcomingEl.innerHTML += html;
    } else {
      pastEl.innerHTML += html;
    }
  });
}

loadEvents();
</script>
